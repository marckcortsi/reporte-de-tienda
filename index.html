<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <!-- Forzar no usar caché -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <!-- Ajuste de viewport para móviles -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>

  <title>Consultas de ventas</title>
  <meta name="theme-color" content="#009ee3">

  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="header">
    <h1>Consultas de ventas</h1>
  </header>

  <div class="container">
    <!-- MENÚ PRINCIPAL -->
    <section id="main-menu" class="section active">
      <div class="menu-container">
        <button class="menu-btn" onclick="navigateTo('consultas')">Consulta Individual</button>
        <button class="menu-btn" onclick="navigateTo('consulta-inversion'); actualizarConsultaInversion();">
          Consulta Global
        </button>
        <button class="menu-btn" onclick="navigateTo('inventario'); mostrarInventario();">
          Inventario
        </button>
      </div>
    </section>

    <!-- CONSULTA INDIVIDUAL -->
    <section id="consultas" class="section slide">
      <h2>Consultas</h2>

      <div class="form-inline-row">
        <label for="select-usuario-consulta">Usuario:</label>
        <select id="select-usuario-consulta"></select>
        <button class="btn" onclick="filtrarInformacionUsuario()">Ver</button>
        <button class="btn" onclick="imprimirReporteUsuario()">Imprimir</button>
      </div>

      <div class="form-inline-row">
        <label for="start-date">Inicio:</label>
        <input type="date" id="start-date">
        <label for="end-date">Fin:</label>
        <input type="date" id="end-date">
        <button class="btn" onclick="filtrarHistorialPorFecha()">Filtrar</button>
        <button class="btn" onclick="limpiarFiltroHistorial()">Borrar</button>
      </div>

      <div id="consulta-usuario" class="consulta-usuario hidden">
        <div class="usuario-info-card">
          <img id="foto-usuario" src="" alt="Foto Usuario" class="foto-usuario">
          <div class="info-text">
            <h2 id="nombre-usuario"></h2>
            <p>Inversión: <span id="inversion-usuario">$0.00</span></p>
            <p>Ganancia Total: <span id="ganancia-usuario">$0.00</span></p>
            <p id="adeudo-usuario-estado" class="adeudo-estado"></p>
            <p>Saldo a favor: <span id="saldo-favor-usuario">$0.00</span></p>
          </div>
        </div>

        <div class="table-container" id="usuario-table-container">
          <div class="form-inline-row">
            <button class="btn" onclick="toggleFullscreen('usuario-table-container')">Pantalla Completa</button>
            <button class="btn-cancel" onclick="navigateBack()">Regresar</button>
          </div>
          <table id="tabla-historial">
            <thead>
              <tr>
                <th>Producto</th>
                <th>Piezas</th>
                <th>Costo</th>
                <th>Fecha</th>
                <th>Ganancia</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- CONSULTA GLOBAL -->
    <section id="consulta-inversion" class="section slide">
      <h2>Consulta de Inversión</h2>
      <div class="inversion-info">
        <p><strong>Inversión Total:</strong> <span id="inv-total">$0.00</span></p>
        <p><strong>Saldo Actual:</strong> <span id="inv-saldo" class="saldo-actual">$0.00</span></p>
        <p><strong>Total de Adeudos:</strong> <span id="inv-adeudos" class="adeudos">$0.00</span></p>
        <p><strong>Ganancias Totales:</strong> <span id="inv-ganancias">$0.00</span></p>
      </div>

      <div class="table-container" id="inversion-table-container">
        <div class="form-inline-row">
          <button class="btn" onclick="toggleFullscreen('inversion-table-container')">Pantalla Completa</button>
          <button class="btn-cancel" onclick="navigateBack()">Regresar</button>
        </div>
        <table id="tabla-usuarios-ganancias">
          <thead>
            <tr>
              <th>Foto</th>
              <th>Usuario</th>
              <th>Total Compras</th>
              <th>Ganancia</th>
              <th>Adeudo</th>
              <th>Saldo a favor</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- INVENTARIO -->
    <section id="inventario" class="section slide">
      <h2>Inventario</h2>
      <div class="table-container" id="inventario-table-container">
        <div class="form-inline-row">
          <button class="btn" onclick="toggleFullscreen('inventario-table-container')">Pantalla Completa</button>
          <button class="btn-cancel" onclick="navigateBack()">Regresar</button>
        </div>
        <table id="tabla-inventario">
          <thead>
            <tr>
              <th>Código</th>
              <th>Descripción</th>
              <th>Compra</th>
              <th>Venta</th>
              <th>Piezas</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
  </div>

  <script src="app.js"></script>
</body>
</html>